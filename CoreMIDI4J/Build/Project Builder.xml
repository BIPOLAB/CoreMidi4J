<project name="CoreMIDI4J SPI Builder">

  <property name="src.dir" value="../src"/>
  <property name="classes.dir" value = "../bin"/>
  <property name="release.dir" value = "../Build/Release"/>

  <target name="clean">
    <delete dir="${classes.dir}"/>
  </target>

  <target name="compile">
    <mkdir dir="${classes.dir}"/>
    <javac includeantruntime="false" srcdir="${src.dir}" destdir="${classes.dir}"/>
  </target>

  <target name="MakeJar" depends="compile">
    <echo> "Creating CoreMidi4J Jar File" </echo>
    <delete file="${release.dir}/CoreMIDI4J.jar"/>
    <jar destfile="${release.dir}/CoreMIDI4J.jar"
         basedir="${classes.dir}">
      <service type="javax.sound.midi.spi.MidiDeviceProvider"
               provider="uk.co.xfactorylibrarians.coremidi4j.CoreMidiDeviceProvider"/>
    </jar>
  </target>
  
  <target name="MakeZip" depends="MakeJar">
    <zip destfile="${release.dir}/CoreMidi4J.zip"
         basedir="${release.dir}"
         includes="**/*.jar,**/*.dylib"
         excludes="**/*.zip"/>
  </target>

</project>
